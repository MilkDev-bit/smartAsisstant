workflows:
  smartassistant-android-only:
    name: SmartAssistant Android Only
    environment:
      groups:
        - android_credentials
      flutter: stable
      vars:
        GRADLE_OPTS: "-Dorg.gradle.jvmargs=-Xmx4g"
    
    scripts:
      - name: Setup Android build
        script: |
          echo "=== BUILDING ANDROID ONLY ==="
          flutter clean
          flutter pub get
      
      - name: Build Android APK
        script: |
          flutter build apk --release
      
      - name: Build Android App Bundle
        script: |
          flutter build appbundle --release
    
    artifacts:
      - build/app/outputs/flutter-apk/*.apk
      - build/app/outputs/bundle/**/*.aab
    
    publishing:
      email:
        recipients:
          - miltonpinamoreno@gmail.com
        notify:
          success: true
          failure: true